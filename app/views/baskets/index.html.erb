<p id="notice"><%= notice %></p>

<h1>Baskets</h1>

<table>
  <thead>
    <tr>
      <th>Product Code</th>
      <th>Product Name</th>
      <th>Price</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @baskets.each do |basket| %>
      <tr>
        <td><%= basket.product.product_code %></td>
        <td><%= basket.product.name %></td>
        <td><%= "#{basket.product.price} €" %></td>
        <td><%= link_to 'Show', basket %></td>
        <td><%= link_to 'Edit', edit_basket_path(basket) %></td>
        <td><%= link_to 'Destroy', basket, method: :delete, data: { confirm: 'Are you sure?' } %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<p>Total: <%= Basket.total %> €</p>
<p>Total discounted: <%= Basket.total_discounted %> €</p>
<p><%= link_to 'Checkout', checkout_baskets_path, data: { confirm: "Total is #{Basket.total_discounted}" } %></p>

<%= link_to 'New Basket', new_basket_path %>
<%= link_to 'Go to Products', products_path %>
<%= link_to 'Go to Index', home_index_path %>
